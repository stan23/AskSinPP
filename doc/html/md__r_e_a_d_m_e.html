<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>AskSin++: Please use V4 Branch for your devices. The master branch is used for active development and may be instable</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">AskSin++
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Please use V4 Branch for your devices. The master branch is used for active development and may be instable </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="autotoc_md1"></a>
AskSin++  &lt;a href="https://travis-ci.org/pa-pa/AskSinPP"&gt;&lt;img src="https://travis-ci.com/pa-pa/AskSinPP.svg?branch=master" alt="Build Status"/&gt;&lt;/a&gt;</h1>
<p>C++ implementation of the AskSin protocol</p>
<ul>
<li>easy configuration of the device channels by using templates</li>
<li>direct eeprom access for the channel data</li>
<li>AES signature support</li>
<li>Supported MCU:<ul>
<li>ATMega328</li>
<li><a href="https://github.com/MCUdude/MightyCore">ATMega32</a> (Standard Pinout)</li>
<li><a href="https://github.com/MCUdude/MightyCore">ATMega644</a> (Bobuino Pinout is highly suggested)</li>
<li><a href="https://github.com/MCUdude/MightyCore">ATMega1284</a> (No OTA Bootloader support, yet)</li>
<li><a href="http://dan.drown.org/stm32duino/package_STM32duino_index.json">STM32F1</a></li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="autotoc_md2"></a>
Required additional Arduino libraries:</h2>
<ul>
<li><a href="https://github.com/GreyGnome/EnableInterrupt">EnableInterrupt</a><ul>
<li>For ATMega644 and ATMega1284 the PR #49 needs to be included</li>
</ul>
</li>
<li><a href="https://github.com/rocketscream/Low-Power.git">Low-Power</a><ul>
<li>For ATMega644 and ATMega1284 the PR #57 needs to be included</li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="autotoc_md3"></a>
Optional required Sensor Libraries</h2>
<ul>
<li><a href="https://github.com/adafruit/Adafruit_Sensor">Sensor Base Library</a></li>
<li><a href="https://github.com/adafruit/DHT-sensor-library">DHT11/DHT22/AM2302/RHT03</a></li>
<li><a href="https://github.com/spease/Sensirion.git">SHT10</a></li>
<li><a href="https://github.com/adafruit/TSL2561-Arduino-Library">TSL2561</a></li>
<li><a href="https://github.com/adafruit/Adafruit-BMP085-Library">BMP085/BMP180</a></li>
<li><a href="https://github.com/finitespace/BME280">BMP280/BME280</a></li>
<li><a href="https://github.com/claws/BH1750">BH1750</a></li>
</ul>
<h2><a class="anchor" id="autotoc_md4"></a>
Enable AES Support</h2>
<p>To enable the AES signature support <b>USE_AES</b> needs to be defined. In addition the default key and the default key index has to provided with <b>HM_DEF_KEY</b> and <b>HM_DEF_KEY_INDEX</b>. </p><pre class="fragment">#define USE_AES
#define HM_DEF_KEY 0x01,0x02,0x03,0x04,0x05,0x06,0x07,0x08,0x09,0x0a,0x0b,0x0c,0x0d,0x0e,0x0f,0x10
#define HM_DEF_KEY_INDEX 0
</pre><p>In FHEM you can get the key from the <em>hmKey</em>, <em>hmKey2</em>, <em>hmKey3</em> attributes of the VCCU. The index is the key number multiplied by 2.</p>
<h2><a class="anchor" id="autotoc_md5"></a>
Extra Defines for Configuration</h2>
<p>All defines has to set in the sketch before any header file is included.</p>
<ul>
<li><b>USE_WOR</b> - enables WOR listening during idle (burst devices)</li>
<li><b>USE_CCA</b> - enable Clear Channel Assessment / Listen Before Talk</li>
<li><b>DEVICE_CHANNEL_COUNT</b> - set number of device channels, skip calculation</li>
<li><b>USE_HW_SERIAL</b> - generate device id and serial from cpu identifier (ATmega644, ATmega1284, STM32F1 only)</li>
<li><b>USE_OTA_BOOTLOADER</b> - read device id and serial from the OTA bootloader</li>
<li><b>USE_OTA_BOOTLOADER_FREQUENCY</b> - reuse the CC1101 frequence setting from the bootloader</li>
</ul>
<h2><a class="anchor" id="autotoc_md6"></a>
Defnies to reduce code size</h2>
<p>The following defines can be used to reduce the size of the code. All defines has to set in the sketch before any header file is included.</p>
<ul>
<li><b>SENSOR_ONLY</b> - save some byte by exclude code for actor devices</li>
<li><b>NORTC</b> - removes code for RTC support</li>
<li><b>NOCRC</b> - removes CRC calculation during startup - The EEPROM will no longer initialized when channel configuration is changed. A extra RESET is needed to initialize it again.</li>
<li><b>SIMPLE_CC1101_INIT</b> - simple CC1101 initialization - No error reporting in case of errors.</li>
</ul>
<h2><a class="anchor" id="autotoc_md7"></a>
Alternative Device RESET Method</h2>
<p>Normally, a device can be reset to its default settings by pressing and holding down the config button for at least 6 seconds. Alternatively, another reset method can be used with <code><a class="el" href="_reset_on_boot_8h_source.html">ResetOnBoot.h</a></code> without pressing the config button (i.e. for devices in hard to reach places):</p><ul>
<li>to reset, reboot the device twice within 4 seconds after startup<ul>
<li>explained in detail:<ul>
<li>startup: the device led blinks with 5 Hz the first 4 seconds</li>
<li>if the device is restarted within this time, the device led blinks with 10 Hz for 4 seconds</li>
<li>only if the device is restarted again within this time, the device will do a RESET , otherwise it will proceed normal operation</li>
</ul>
</li>
</ul>
</li>
<li>implemented in <a href="https://github.com/pa-pa/AskSinPP/blob/master/examples/HM-LC-SW1-BA-PCB/HM-LC-SW1-BA-PCB.ino"><code>HM-LC-SW1-BA-PCB.ino</code></a> to demonstrate the usage</li>
<li>at least, an automated pairing can be triggered by uncommenting <a href="https://github.com/pa-pa/AskSinPP/blob/8e235f54c6a31c9485be6e60632d58274ff199ba/examples/HM-LC-SW1-BA-PCB/HM-LC-SW1-BA-PCB.ino#L113">line #113</a> </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.8.20
</small></address>
</body>
</html>
